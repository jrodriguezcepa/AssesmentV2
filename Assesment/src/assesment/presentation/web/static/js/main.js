(window.webpackJsonpassessment=window.webpackJsonpassessment||[]).push([[0],{36:function(e,t,n){e.exports=n(76)},46:function(e,t){Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,a=new Array(n);n--;)a[n]=[t[n],e[t[n]]];return a}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,a=new Array(n);n--;)a[n]=e[t[n]];return a})},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"QuestionType1",function(){return U}),n.d(a,"QuestionType2",function(){return q}),n.d(a,"QuestionType3",function(){return M}),n.d(a,"QuestionType4",function(){return J}),n.d(a,"QuestionType6",function(){return Y}),n.d(a,"QuestionType7",function(){return Z}),n.d(a,"QuestionType8",function(){return ne}),n.d(a,"QuestionType9",function(){return re}),n.d(a,"QuestionType11",function(){return oe}),n.d(a,"QuestionType12",function(){return le}),n.d(a,"QuestionType15",function(){return pe}),n.d(a,"QuestionType16",function(){return we});var r={};n.r(r),n.d(r,"getClampIndex",function(){return Te}),n.d(r,"selectCard",function(){return je}),n.d(r,"deltaCard",function(){return Ne}),n.d(r,"updateQuestionCallback",function(){return Pe}),n.d(r,"answerCurrentCardForTest",function(){return ke}),n.d(r,"prevCard",function(){return Ae}),n.d(r,"nextCard",function(){return _e}),n.d(r,"gotoFirstUncompletedCard",function(){return Se}),n.d(r,"deselectCard",function(){return Ve}),n.d(r,"updateCard",function(){return Re}),n.d(r,"updateQuestion",function(){return Ie}),n.d(r,"setFinalText",function(){return De});var c=n(0),o=n.n(c),i=n(6),l=n.n(i),u=n(3),s=(n(46),n(8)),d=n(30),f=n(5);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v={cards:[],currentCardIndex:0,finalText:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"UPDATE_QUESTION":return e.id===t.payload.id?m({},e,{},t.payload):e;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"UPDATE_CARD":return e.index===t.payload.index?m({},e,{},t.payload):e;case"UPDATE_QUESTION":var n=e.questions.map(function(e){return h(e,t)});return m({},e,{questions:n,valid:n.every(function(e){return e.valid}),completed:n.every(function(e){return e.completed})});default:return e}},E=Object(s.c)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.cards,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"UPDATE_CARD":case"UPDATE_QUESTION":return e.map(function(e){return b(e,t)});default:return e}},currentCardIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.currentCardIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SELECT_CARD":return t.payload.index;case"DESELECT_CARD":return null;default:return e}},finalText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.finalText,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_FINAL_TEXT":return t.payload;default:return e}}}),g=[d.a],w=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d)(s.a.apply(void 0,g));var y=function(e){return{type:"UPDATE_QUESTION",payload:e}},x=function(e){return{type:"SELECT_CARD",payload:{index:e}}},O=function(e,t){return t.cards.find(function(t){return t.index===e})},C=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.cards.filter(function(e){var n=e.completed,a=e.waiting;return t^(n||a)})},T=function(e){return e.cards.length},j=function(e){return e.currentCardIndex},N=n(9),P=n(10),k=n(12),A=n(11),_=n(13),S=n(4),V=n(14);var R=function(){return null},I=function(e){try{var t=window.CEPA.locales[e];return t[window.CEPA.lang]||t.en||e}catch(n){return e}},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},F=function(e){var t,n,a,r,c=e.split("/");return 3===c.length?(a=c[2],"es"===window.CEPA.lang||"pt"===window.CEPA.lang?(t=c[0],n=c[1]):(n=c[0],t=c[1]),r=a+"-"+n+"-"+t):r=e,r};function Q(e){var t=e.answer,n=e.disabled,a=e.htmlId,r=e.index,i=e.inputType,l=e.onChange,u=void 0===l?noop:l,s=e.selected,d=Object(c.useRef)(null);return Object(c.useEffect)(function(){0===r&&s&&!n&&d.current.focus()},[n,r,s]),o.a.createElement(c.Fragment,null,o.a.createElement("input",{type:i||"text",id:a,className:"form-control",readOnly:n,ref:d,name:a,value:t,onChange:function(e){return u(e.currentTarget.value)}}))}Q.getValidValueForTest=function(e){return"test short text"};var U=Q;function L(e){return o.a.createElement(U,Object.assign({},e,{onChange:function(t){e.onChange(F(t))},inputType:"date"}))}L.getValidValueForTest=function(e){var t={vt:"10/31/1976",in:"10/31/1976",id:"10/31/1976",ph:"10/31/1976",pk:"10/31/1976",en:"10/31/1976",es:"31/10/1976",pt:"31/10/1976"}[window.CEPA.lang];return F(t)},L.parseValue=function(e){var t=$('input[type="date"]',e).val();return F(t)};var q=L;function z(e){var t=e.answer,n=e.data,a=n.label,r=n.id,c=e.disabled,i=e.onChange,l=e.choiceType,u=void 0===l?"radio":l,s="id-".concat(r),d="checkbox"===u?t.includes(r):t===r;return o.a.createElement("div",{className:"cepa-choice custom-control custom-".concat(u)},o.a.createElement("input",{className:"custom-control-input",type:u,id:s,disabled:c,name:r,value:r,checked:d,onChange:i}),o.a.createElement("label",{className:"custom-control-label",htmlFor:s,disabled:c},a))}function B(e){var t=e.properties.choices.map(function(t,n){return o.a.createElement(z,Object.assign({},e,{key:n,data:t,onChange:function(t){return e.onChange(t.currentTarget.value)}}))});return o.a.createElement(c.Fragment,null,t)}var H=function(e){var t=[];return $('input[type="radio"]',e).each(function(e,n){var a=$(n);t.push({id:a.attr("value"),label:a.parent().text()})}),t};B.getValidValueForTest=function(e){return e.properties.choices[0].id},B.parseProperties=function(e){return{choices:H(e)}},B.nextIfValid=!0;var M=B;function W(e){var t=e.answer,n=e.disabled,a=e.properties.options,r=e.htmlId,c=(e.index,e.onChange),i=void 0===c?R:c,l=a.map(function(e,t){var n=e.id,a=e.label;return o.a.createElement("option",{key:t,value:n},a)});return o.a.createElement("select",{id:r,disabled:n,value:t,className:"custom-select",onChange:function(e){return i(e.currentTarget.value)}},l)}var X=function(e){var t=[];return $("option",e).each(function(e,n){var a=$(n);t.push({id:a.attr("value"),label:a.text()})}),t};W.getValidValueForTest=function(e){return e.properties.options[1].id},W.parseProperties=function(e){return{options:X(e)}},W.nextIfValid=!0;var J=W;function K(e){var t=e.answer,n=e.htmlId,a=e.onChange,r=e.disabled,i=Object(c.useRef)(null),l=Object(c.useRef)(null),u="",s="en"===window.CEPA.lang?"m":"k";function d(e){a(i.current.value+l.current.value)}return t&&(u=t.slice(0,-1),s=t.slice(-1)),o.a.createElement(c.Fragment,null,o.a.createElement("input",{type:"number",id:n,className:"form-control",readOnly:r,ref:i,name:n,value:u,onChange:d}),o.a.createElement("select",{disabled:r,className:"custom-select",onChange:d,ref:l,value:s},o.a.createElement("option",{value:"k"},I("kmts")),o.a.createElement("option",{value:"m"},I("miles"))))}K.isValid=function(e){if(!e||e.length<2)return!1;var t=e.slice(0,-1),n=e.slice(-1);return("k"===n||"m"===n)&&!isNaN(t)},K.getValidValueForTest=function(e){return"100k"};var Y=K;function G(e){var t=e.answer,n=e.htmlId,a=e.onChange,r=e.disabled,i=Object(c.useRef)(null),l=Object(c.useRef)(null),u="",s=!1;function d(e){l.current.checked?a("0"):a(F(i.current.value))}"0"===t?s=!0:t&&(u=t);var f="checkbox-".concat(n);return o.a.createElement(c.Fragment,null,o.a.createElement("input",{type:"date",id:n,className:"form-control",readOnly:r,ref:i,name:n,value:u,onChange:d}),o.a.createElement("div",{className:"cepa-choice custom-control custom-checkbox"},o.a.createElement("input",{className:"custom-control-input",type:"checkbox",id:f,disabled:r,checked:s,onChange:d,ref:l}),o.a.createElement("label",{className:"custom-control-label",htmlFor:f,disabled:r},I("never"))))}G.getValidValueForTest=q.getValidValueForTest;var Z=G;function ee(e){function t(t){var n,a,r=t.currentTarget,c=(n=e.answer,a=r.value,r.checked?[].concat(Object(V.a)(n),[a]):n.filter(function(e){return e!==a}));e.onChange(c)}var n=e.properties.choices.map(function(n,a){return o.a.createElement(z,Object.assign({},e,{key:a,data:n,choiceType:"checkbox",onChange:t}))});return o.a.createElement(c.Fragment,null,n)}var te=function(e){var t=[];return $('input[type="checkbox"]',e).each(function(e,n){var a=$(n);t.push({id:a.attr("value"),label:a.parent().text()})}),t};ee.getValidValueForTest=function(e){return[e.properties.choices[0].id]},ee.parseProperties=function(e){return{choices:te(e)}};var ne=ee;function ae(e){return o.a.createElement(U,Object.assign({},e,{inputType:"email"}))}ae.getValidValueForTest=function(e){return"test@example.com"},ae.isValid=function(e){return/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/.test(e)};var re=ae;function ce(e){var t=e.answer,n=e.disabled,a=e.htmlId,r=e.index,i=e.onChange,l=void 0===i?noop:i,u=e.selected,s=Object(c.useRef)(null);return Object(c.useEffect)(function(){0===r&&u&&!n&&s.current.focus()},[n,r,u]),o.a.createElement(c.Fragment,null,o.a.createElement("textarea",{id:a,className:"form-control",readOnly:n,ref:s,name:a,value:t,onChange:function(e){return l(e.currentTarget.value)}},t))}ce.getValidValueForTest=function(e){return"Test long text lorem ipsum.\nAnother line."};var oe=ce;function ie(e){return o.a.createElement(q,e)}ie.getValidValueForTest=q.getValidValueForTest,ie.parseValue=q.parseValue,ie.isValid=function(e){return new Date(new Date-new Date(e)).getFullYear()-1970>=18};var le=ie;var ue=function(e){var t=Object(c.useRef)(null);return Object(c.useEffect)(function(){var n,a=document.querySelector("#".concat(e)),r=a||function(e){var t=document.createElement("div");return t.setAttribute("id",e),t}(e);return a||(n=r,document.body.append(n)),r.appendChild(t.current),function(){t.current.remove(),-1===r.childNodes.length&&r.remove()}},[]),t.current||(t.current=document.createElement("div")),t.current},se=function(e){var t=e.id,n=e.children,a=ue(t);return Object(i.createPortal)(n,a)},de=n(31);function fe(e){e.answer,e.id;var t=e.card,n=e.properties,a=n.youtubeId,r=n.width,i=void 0===r?1920:r,l=n.height,u=void 0===l?1080:l,s=e.onChange,d=void 0===s?noop:s,f=e.selected,p=e.selectCard,m=Object(c.useState)(!1),v=Object(S.a)(m,2),h=v[0],b=v[1],E=Object(c.useState)(!1),g=Object(S.a)(E,2),w=g[0],y=g[1],x=Object(c.useRef)(null),O=Object(c.useRef)(null),C=o.a.useRef(!1);o.a.useEffect(function(){C.current&&!f&&w&&O.current.internalPlayer.pauseVideo(),C.current=f},[f,w]),Object(c.useEffect)(function(){window.addEventListener("scroll",function(){b(w&&x.current.getBoundingClientRect().bottom<x.current.offsetHeight/2)})});return o.a.createElement("div",{className:"video-player".concat(h?" hidden":"")},o.a.createElement("div",{className:"ratio-grid",ref:x},o.a.createElement("div",null,o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(i," ").concat(u)})),o.a.createElement(de.a,{ref:O,videoId:a,opts:{height:"100%",width:"100%",playerVars:{enablejsapi:1,modestbranding:1,playsinline:1,showinfo:0,rel:0}},onStateChange:function(e){switch(e.data){case 1:y(!0);break;default:y(!1)}},onEnd:function(){d(!0)}})),o.a.createElement(se,{id:"back-to-video-portal"},o.a.createElement("div",{className:"back-to-video-wrapper".concat(h?" video-player-hidden":"")},o.a.createElement("button",{className:"back-to-video",onClick:function(){p(t),window.CEPA.scrollToElement(x.current)}},I("backToVideo"),o.a.createElement("i",{className:"icon-arrows-green"})))))}fe.dontEdit=!0,fe.getValidValueForTest=function(e){return!0},fe.parseProperties=function(e){return{youtubeId:e.data("youtube-id"),width:e.data("width"),height:e.data("height")}},fe.nextIfValid=!0;var pe=fe,me="STATE_STOP",ve="STATE_PLAYING",he="STATE_ENDED";function be(e){e.answer,e.id;var t,n=e.card,a=e.properties.videoURL,r=e.onChange,i=void 0===r?noop:r,l=e.selectCard,u=Object(c.useState)(me),s=Object(S.a)(u,2),d=s[0],p=s[1],m=Object(c.useState)(!1),v=Object(S.a)(m,2),h=v[0],b=v[1],E=Object(c.useState)(!1),g=Object(S.a)(E,2),w=g[0],y=g[1],x=Object(c.useRef)(null);Object(c.useEffect)(function(){window.addEventListener("scroll",function(){y(d==ve&&x.current.getBoundingClientRect().bottom<x.current.offsetHeight/2)})});var O=function(){x.current.play()},C=(t={},Object(f.a)(t,me,h?o.a.createElement("div",{className:"full-content clickable",onClick:O},o.a.createElement("div",{className:"centered-content"},o.a.createElement("div",{className:"icon-play-container"}),o.a.createElement("h3",null,I("start")))):null),Object(f.a)(t,he,o.a.createElement("div",{className:"full-content clickable",onClick:O},o.a.createElement("div",{className:"centered-content"},o.a.createElement("div",{className:"icon-play-container"}),o.a.createElement("h3",null,I("restart"))))),t)[d],T=C?o.a.createElement("div",{className:"video-player-overlay"},C):null;return o.a.createElement("div",{className:"video-player".concat(w?" hidden":"")},o.a.createElement("video",{controls:"controls",onCanPlay:function(){b(!0)},onPause:function(){p(me)},onPlay:function(){p(ve)},onEnded:function(){p(he),i(!0)},ref:x,src:a}),T,o.a.createElement(se,{id:"back-to-video-portal"},o.a.createElement("div",{className:"back-to-video-wrapper".concat(w?" video-player-hidden":"")},o.a.createElement("button",{className:"back-to-video",onClick:function(){l(n),window.CEPA.scrollToElement(x.current)}},I("backToVideo"),o.a.createElement("i",{className:"icon-arrows-green"})))))}be.dontEdit=!0,be.getValidValueForTest=function(e){return!0},be.parseProperties=function(e){return{videoURL:e.data("video-url")||"http://testing.cepadc.com/flash/assessment/videos/video_".concat(e.data("video-id"),".mp4")}},be.nextIfValid=!0;var Ee,ge,we=be,ye=void 0,xe={},Oe=function(e){if(xe[e])return xe[e];var t=a["QuestionType"+e];return function(e,t){var n={isValid:function(e){return Boolean(e)},nextIfValid:!1,dontEdit:!1,parseCompleted:function(e){return e.data("completed")},parseID:function(e){return e.attr("id").slice(2)},parseProperties:function(e){},parseTitle:function(e){return e.find("label[for]").text()},parseValue:function(e){var n=$("input, select, textarea",e);if(!(n.length>1))return n.val();var a=n.attr("type"),r=n.filter(":checked");if("checkbox"===a){var c=[];return r.each(function(e,t){c.push($(t).val())}),c}return"radio"===a?13===t?ye._getValueType13():14===t?ye._getValueType14():r.val():void 0},type:t};Object.entries(n).forEach(function(t,n){var a=Object(S.a)(t,2),r=a[0],c=a[1];void 0===e[r]&&(e[r]=c)})}(t,e),xe[e]=t,t},Ce=Object(u.b)(function(e,t){return{}},r)(Ee=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(k.a)(this,Object(A.a)(t).call(this,e))).handleAnswerChange=function(e){var t=n.props,a=t.id;(0,t.updateQuestion)({id:a,answer:e,valid:n.QuestionTypeComponent.isValid(e)})},n.QuestionTypeComponent=Oe(e.type),n}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props,t=e.completed,n=e.id,a=e.lastQuestion,r=e.readOnly,c=e.title,i=e.type,l=e.error,u=e.waiting,s="id-".concat(n),d=r||u;return o.a.createElement("div",{id:"q".concat(n),className:"cepa-question form-group question-type-".concat(i).concat(t?" completed":"").concat(l?" error":"").concat(a?" last-question":"")},c&&o.a.createElement("label",{className:"cepa-question__label",disabled:d,htmlFor:s},c),o.a.createElement(this.QuestionTypeComponent,Object.assign({},this.props,{disabled:d,htmlId:s,onChange:this.handleAnswerChange})),l&&o.a.createElement("div",{className:"error-text"},l))}}]),t}(c.Component))||Ee,Te=function(e,t){var n=T(t());return Math.max(0,Math.min(n-1,e))},je=function(e){return function(t,n){var a=j(n()),r=Te(e,n);r!==a&&t(x(r))}},Ne=function(e){return function(t,n){var a=j(n()),r=Te(a+e,n);r!==a&&t(x(r))}},Pe=function(e){return function(t,n){return t(y(e)),Promise.resolve()}},ke=function(){return function(e,t){var n;(n=t(),O(j(n),n)).questions.forEach(function(t){var n=Oe(t.type).getValidValueForTest(t);e(y({id:t.id,answer:n,valid:!0}))})}},Ae=function(){return Ne(-1)},_e=function(){return Ne(1)},Se=function(e){return function(t,n){var a=C(n(),!0);(a=a.filter(function(t){return t.index!==e})).length&&t(x(a[0].index))}},Ve=function(){return{type:"DESELECT_CARD"}},Re=function(e){return{type:"UPDATE_CARD",payload:e}},Ie=y,De=function(e){return{type:"SET_FINAL_TEXT",payload:e}},Fe=n(18),Qe=n.n(Fe),Ue=n(34),Le=n(35),$e=n.n(Le);function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Be(e){var t=e.index,n=e.canEdit,a=e.completed,r=e.editing,c=e.onSubmit,i=e.onToggleEdit,l=e.readOnly,s=e.selected,d=e.valid,f=e.waiting,p=Object(u.d)(function(e){return T(e)}),m=Object(u.c)(),v=t>0,h=t<p-1,b=o.a.createElement("button",{className:"btn btn-primary",disabled:!d||f,onClick:c},I(f?"submitting":"submit")),E=o.a.createElement("button",{className:"btn btn-primary-outline",onClick:i},I(r?"cancel":"edit"));return o.a.createElement("div",{className:"card__buttons"},o.a.createElement("div",{className:"card__buttons__actions"},n&&a&&E,n&&!l&&b),o.a.createElement("div",{className:"card__buttons__arrows"},v&&o.a.createElement("button",{disabled:!s,className:"arrow-prev",onClick:function(){return m(Ae())}},I("previous")),h&&o.a.createElement("button",{disabled:!s,className:"arrow-next",onClick:function(){return m(_e())}},I("next"))))}var He=Object(u.b)(null,r,null,{forwardRef:!0})(ge=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(k.a)(this,Object(A.a)(t).call(this,e))).state={canEdit:!0,editing:!1,readyToSubmit:!1},n.getPayload=function(){var e=n.props.questions.map(function(e){return{id:e.id,answer:e.answer}});return{module:window.CEPA.module,answers:e}},n.fetchData=function(e,t){var a=n.props.index,r=null!==D("error"),c=null!==D("develop"),o=r||"true"===Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_VERSION:"1.2.0"}).REACT_APP_TEST_ERROR,i=!c&&!0,l={url:e,method:"post",data:encodeURIComponent(JSON.stringify(t)),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},u={url:"_ajax/server_response_".concat(a+1).concat(o?"_error":"",".json"),method:"get",params:t};return $e()(i?l:u)},n.sendAnswers=Object(Ue.a)(Qe.a.mark(function e(){var t,a,r;return Qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.valid){e.next=3;break}return e.abrupt("return");case 3:return n.setWaiting(!0),t=window.CEPA.postURL,a=n.getPayload(),e.next=8,n.fetchData(t,a);case 8:r=e.sent;try{n.successResponse(r.data)}catch(c){console.error("error",c)}n.setWaiting(!1);case 11:case"end":return e.stop()}},e)})),n.handleSubmit=function(){var e=n.props,t=e.gotoFirstUncompletedCard,a=e.index;e.valid&&(n.setState({editing:!1}),n.sendAnswers(),t(a))},n.handleToggleEdit=function(){n.setState(function(e){return{editing:!e.editing}})},n.getUpdateAnswersData=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.state.answers,c=a?ze({},r,Object(f.a)({},e,t)):Object.entries(r).reduce(function(n,a){var r=Object(S.a)(a,2),c=r[0],o=r[1];return n[c]=e!==c?o:ze({},o,{},t),n},{});return c},n.cardRef=o.a.createRef(),n}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.state,a=n.editing,r=n.readyToSubmit,c=t.editing,o=t.readyToSubmit,i=this.props.selected,l=e.selected;i&&i!==l&&window.CEPA.scrollToElement(this.cardRef.current),!r||o||a&&!c||this.handleSubmit()}},{key:"setWaiting",value:function(e){var t=this.props,n=t.index;(0,t.updateCard)({index:n,waiting:e})}},{key:"completeQuestion",value:function(e,t){var n=this.props,a=(n.nextCard,n.updateQuestionCallback);n.completed;a({id:e,completed:!Boolean(t),error:t}).then(function(){})}},{key:"successResponse",value:function(e){var t=this,n=this.props.setFinalText;e.valids&&e.valids.map(function(e){return t.completeQuestion(e)}),e.errors&&e.errors.map(function(e){var n=e.id,a=e.error;return t.completeQuestion(n,a)}),e.final_text&&n(e.final_text)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.index,a=e.questions,r=e.title,c=e.completed,i=e.selected,l=e.valid,u=e.waiting,s=this.state,d=s.canEdit,f=s.editing,p=!i||c&&!f||u,m=a.map(function(e,t){return o.a.createElement(Ce,Object.assign({index:t,key:t,lastQuestion:t===a.length-1,readOnly:p,selected:i,waiting:u},e))});return o.a.createElement("div",{className:"row cepa-card ".concat(t).concat(i?" selected":"").concat(c?" completed":"").concat(l?" valid":"").concat(u?" waiting":""),ref:this.cardRef},o.a.createElement("div",{className:"card col px-0 mb-4 shadow-sm"},o.a.createElement("div",{className:"card-body"},r&&o.a.createElement("h3",null,r),m,o.a.createElement(Be,{completed:c,canEdit:d,editing:f,index:n,onSubmit:this.handleSubmit,onToggleEdit:this.handleToggleEdit,readOnly:p,selected:i,valid:l,waiting:u}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.completed,a=e.questions,r=(e.index,t.editing),c={},o=a.every(function(e,t){var a=e.type,c=e.completed,o=e.valid,i=Oe(a).nextIfValid;return(!n||!c||r)&&o&&i});o!==t.readyToSubmit&&(c.readyToSubmit=o);var i=!a.every(function(e){var t=e.type;return Oe(t).dontEdit});return i!==t.canEdit&&(c.canEdit=i),c}}]),t}(c.Component))||ge;var Me,We=function(e){var t=e.title,n=e.body,a=e.onHide,r=Object(c.useRef)(null);return Object(c.useEffect)(function(){var e=window.$;window.containerRef=r,e(r.current).modal().on("hidden.bs.modal",a)}),o.a.createElement("div",{ref:r,className:"modal fade",id:"",tabIndex:"-1",role:"dialog","aria-labelledby":"Success Message","aria-hidden":"true"},o.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},t),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{className:"modal-body",dangerouslySetInnerHTML:{__html:n}}),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal"},I("close"))))))},Xe=window.$;function Je(e){var t=e.currentCardIndex,n=e.totalCards,a=o.a.createElement("div",{className:"cepa-controls"},o.a.createElement("span",{className:"controls__numbers"},t+1," / ",n)),r=document.querySelector(".cepa-controls-wrapper");return r&&l.a.createPortal(a,r)}function Ke(e){var t=e.version,n=o.a.createElement("div",{className:"copyright"},"v",t),a=document.querySelector(".brand");return a&&l.a.createPortal(n,a)}var Ye=Object(u.b)(function(e,t){return{cards:e.cards,totalCards:T(e),currentCardIndex:j(e),finalText:e.finalText}})(Me=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(k.a)(this,Object(A.a)(t).call(this,e))).state={completed:!1},n.redirectIfNeeded=function(){window.CEPA.successRedirect&&(window.location.href=window.CEPA.successRedirect)},n.handleHide=function(){n.state.completed&&n.redirectIfNeeded()},Xe("nav.navbar .navbar-brand").before('<div class="cepa-controls-wrapper"></div>'),n}return Object(_.a)(t,e),Object(P.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.props.finalText;this.state.completed&&!n&&this.redirectIfNeeded()}},{key:"render",value:function(){var e=this.props,t=e.cards,n=e.currentCardIndex,a=e.finalText,r=e.totalCards,i=this.state.completed,l=t.map(function(e,t){return o.a.createElement(He,Object.assign({key:t,selected:n===t},e))});return o.a.createElement(c.Fragment,null,Boolean(a)&&i&&o.a.createElement(We,{body:a,onHide:this.handleHide}),o.a.createElement("div",{className:"cepa-deck"},o.a.createElement("div",{className:"cepa-deck__cards container"},l),o.a.createElement(Je,{currentCardIndex:n,totalCards:r}),o.a.createElement(Ke,{version:"1.2.0"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.cards.every(function(e){return e.completed});return n===t.completed?{}:{completed:n}}}]),t}(c.Component))||Me;var Ge=function(e){e.data;var t=Object(u.c)();function n(e){var n=e.key,a=e.metaKey,r=e.shiftKey;a&&r&&("u"===n||"e"===n)&&t(ke())}return Object(c.useEffect)(function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}},[]),o.a.createElement("div",{className:"cepa-app"},o.a.createElement(Ye,null))},Ze=window.$;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(75);var et=window.$,tt=et("#assessment"),nt=function(e){var t=Ze("> fieldset",e),n=[];return t.each(function(e,t){var a=Ze("> div[data-type]",t),r=[];a.each(function(t,n){var a=Ze(n),c=a.data("type"),o=Oe(c),i=o.parseValue(a);r.push({answer:i,card:e,id:o.parseID(a),index:t,completed:o.parseCompleted(a),properties:o.parseProperties(a),title:o.parseTitle(a),type:c,valid:o.isValid(i)})}),n.push({index:e,className:t.className,completed:r.every(function(e){return e.completed}),valid:r.every(function(e){return e.valid}),waiting:!1,questions:r})}),{cards:n,currentCardIndex:0}}(tt);window.CEPA=window.CEPA||{},void 0===window.CEPA.locales&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,n=window.document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}("https://www.bytelockers.com/cepa/static/js/locales.js"),window.CEPA.lang=et("html").attr("lang")||"es",window.CEPA.postURL=tt.attr("action"),window.CEPA.module=tt.data("module"),window.CEPA.successRedirect=tt.data("success-redirect"),window.CEPA.finalText=window.CEPA.finalText||et("#final-text").html(),window.CEPA.scrollToElement=function(e){var t=window.matchMedia("(min-width: 576px)").matches?62:40;et([document.documentElement,document.body]).animate({scrollTop:et(e).offset().top-t-46},500)};var at=document.getElementById("root"),rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.e)(E,e,w)}(function(e){void 0===e.finalText&&(e.finalText=window.CEPA?window.CEPA.finalText:"");var t=C(e);return t.length&&(e.currentCardIndex=t[0].index),e}(window.CEPA.initialState||nt));at&&l.a.render(o.a.createElement(u.a,{store:rt},o.a.createElement(Ge,null)),at),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}),et(function(e){var t=et(".thumbs-slider");t.slick&&t.slick({slidesToShow:3,slidesToScroll:3,infinite:!1,prevArrow:'<div class="slick-prev">Previous</div>',nextArrow:'<div class="slick-next">Next</div>',responsive:[{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2,infinite:!1}},{breakpoint:576,settings:{slidesToShow:1,slidesToScroll:1,infinite:!1}}]});var n=et(".cepa-card.selected")[0];n&&setTimeout(function(){window.CEPA.scrollToElement(n)})})}},[[36,1,2]]]);
//# sourceMappingURL=main.js.map
