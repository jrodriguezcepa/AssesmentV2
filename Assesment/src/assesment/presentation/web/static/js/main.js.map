{"version":3,"sources":["utils/polyfills.js","state/reducers.js","state/types.js","state/store.js","state/actions.js","state/selectors.js","components/utils.js","components/questions/QuestionType1.jsx","components/questions/QuestionType2.jsx","components/questions/Choice.jsx","components/questions/QuestionType3.jsx","components/questions/QuestionType4.jsx","components/questions/QuestionType6.jsx","components/questions/QuestionType7.jsx","components/questions/QuestionType8.jsx","components/questions/QuestionType9.jsx","components/questions/QuestionType11.jsx","components/questions/QuestionType12.jsx","utils/usePortal.js","utils/Portal.js","components/questions/QuestionType15.jsx","components/questions/QuestionType16.jsx","components/Question.jsx","state/operations.js","components/Card.jsx","components/Modal.js","components/Deck.jsx","components/App.js","utils/parser.js","serviceWorker.js","index.js"],"names":["Object","entries","obj","ownProps","keys","i","length","resArray","Array","values","initialState","cards","currentCardIndex","finalText","questionReducer","state","action","type","id","payload","cardReducer","index","questions","map","questionFor","valid","every","completed","cardsReducer","combineReducers","card","middleware","thunk","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","updateQuestion","data","selectCard","getCardFromIndex","cardIndex","find","getPendingCards","direction","filter","waiting","getTotalCards","getCurrentCardIndex","noop","getLocale","key","localKey","CEPA","locales","lang","en","error","getParameterByName","name","url","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","getIsoDateString","plainValue","day","month","year","isoDateString","humanDateFormatParts","split","QuestionType1","answer","disabled","htmlId","inputType","onChange","selected","inputEl","useRef","useEffect","current","focus","className","readOnly","ref","value","event","currentTarget","getValidValueForTest","QuestionType2","props","inputValue","vt","in","ph","pk","es","pt","parseValue","$div","$","val","Choice","label","choiceType","checked","includes","htmlFor","QuestionType3","content","properties","choices","choiceDataFor","parseChoices","each","inputFor","$inputFor","push","attr","parent","text","parseProperties","nextIfValid","QuestionType4","options","parseOptions","optionFor","$optionFor","QuestionType6","selectEl","quantity","units","handleChange","slice","isValid","isNaN","QuestionType7","checkboxEl","date","never","checkboxHtmlId","QuestionType8","array","item","checkbox","newAnswer","itemFor","QuestionType9","test","QuestionType11","QuestionType12","Date","getFullYear","usePortal","rootElemRef","rootElem","existingParent","document","querySelector","parentElem","rootContainer","createElement","setAttribute","createRootElement","body","append","appendChild","remove","childNodes","Portal","children","target","createPortal","QuestionType15","youtubeId","width","height","useState","hidden","setHidden","playing","setPlaying","videoWrapper","videoElement","prevSelectedRef","React","internalPlayer","pauseVideo","addEventListener","getBoundingClientRect","bottom","offsetHeight","xmlns","viewBox","videoId","opts","playerVars","onStateChange","onEnd","onClick","scrollToElement","dontEdit","STATE_STOP","STATE_PLAYING","STATE_ENDED","QuestionType16","videoURL","videoState","setVideoState","videoReady","setVideoReady","handlePlay","play","overlayContent","overlay","controls","onCanPlay","onPause","onPlay","onEnded","src","cacheTypeComponents","getQuestionTypeComponent","QuestionTypeComponent","genericProperties","Boolean","parseCompleted","parseID","parseTitle","$inputs","inputsType","$checked","element","_getValueType13","_getValueType14","forEach","undefined","addGenericProperties","Question","connect","operations","handleAnswerChange","this","lastQuestion","title","Component","getClampIndex","getState","totalCards","selectors","Math","max","min","dispatch","clampIndex","actions","deltaCard","updateQuestionCallback","Promise","resolve","answerCurrentCardForTest","questionDataFor","validValueForTest","prevCard","nextCard","gotoFirstUncompletedCard","excludeIndex","pendingCards","deselectCard","updateCard","setFinalText","Buttons","canEdit","editing","onSubmit","onToggleEdit","useSelector","useDispatch","prevVisible","nextVisible","submitButton","editButton","Card","forwardRef","readyToSubmit","getPayload","answers","module","fetchData","errorByParam","developByParam","testError","process","REACT_APP_TEST_ERROR","production","productionConfig","method","encodeURIComponent","JSON","stringify","headers","developConfig","params","axios","sendAnswers","a","setWaiting","postURL","response","successResponse","console","handleSubmit","setState","handleToggleEdit","getUpdateAnswersData","newAnswers","reduce","accumulator","idFor","prevData","cardRef","createRef","prevProps","prevState","wasEditing","wasReadyToSubmit","wasSelected","then","valids","completeQuestion","errors","final_text","questionsComponents","dataFor","questionIndex","nextProps","cardCompleted","nextState","Modal","onHide","containerRef","modal","on","tabIndex","role","aria-labelledby","aria-hidden","data-dismiss","aria-label","dangerouslySetInnerHTML","__html","Controls","reactChild","container","ReactDOM","Version","version","Deck","redirectIfNeeded","successRedirect","handleHide","before","cardsComponents","App","keydownHandler","metaKey","shiftKey","removeEventListener","hostname","match","$assessment","dataFromHTML","$fieldsets","fieldsetFor","$questions","divFor","$divFor","getDataFromHTML","callback","script","readyState","onreadystatechange","onload","getElementsByTagName","loadScript","html","headerHeight","matchMedia","matches","documentElement","animate","scrollTop","offset","top","rootElement","getElementById","store","createStore","configureStore","prepareInitialState","render","navigator","serviceWorker","ready","registration","unregister","jQuery","$thumbsSlider","slick","slidesToShow","slidesToScroll","infinite","prevArrow","nextArrow","responsive","breakpoint","settings","selectedCard","setTimeout"],"mappings":"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","file":"static/js/main.1bc282db.chunk.js","sourcesContent":["if (!Object.entries) {\n  Object.entries = function(obj){\n    var ownProps = Object.keys(obj),\n        i = ownProps.length,\n        resArray = new Array(i); // preallocate the Array\n    while (i--)\n      resArray[i] = [ownProps[i], obj[ownProps[i]]];\n    return resArray;\n  };\n}\n\nif (!Object.values) {\n  Object.values = function(obj){\n    var ownProps = Object.keys(obj),\n        i = ownProps.length,\n        resArray = new Array(i); // preallocate the Array\n    while (i--)\n      resArray[i] = obj[ownProps[i]];\n    return resArray;\n  };\n}\n","import { combineReducers } from 'redux';\nimport * as types from './types';\n\n/* State shape\n{\n  cards: array,\n  currentCardIndex: number,\n}\n*/\n\nconst initialState = {\n  cards: [],\n  currentCardIndex: 0,\n  finalText: null,\n};\n\n\nconst questionReducer = ( state = null, action = {} ) => {\n  switch (action.type) {\n    case types.UPDATE_QUESTION:\n      if (state.id === action.payload.id) {\n        return {\n          ...state,\n          ...action.payload,\n        };\n      }else{\n        return state;\n      }\n    default:\n      return state;\n  }\n};\n\n\nconst cardReducer = ( state = null, action = {} ) => {\n  switch (action.type) {\n    case types.UPDATE_CARD:\n      if (state.index === action.payload.index) {\n        return {\n          ...state,\n          ...action.payload,\n        };\n      }else{\n        return state;\n      }\n    case types.UPDATE_QUESTION:\n      const questions = state.questions.map(questionFor => questionReducer(questionFor, action));\n      return {\n        ...state,\n        questions,\n        valid: questions.every(({ valid }) => valid),\n        completed: questions.every(({ completed }) => completed),\n      };\n    default:\n      return state;\n  }\n};\n\n\nconst cards = ( state = initialState.cards, action = {} ) => {\n  switch (action.type) {\n    case types.UPDATE_CARD:\n    case types.UPDATE_QUESTION:\n      return state.map(card => cardReducer(card, action));\n    default:\n      return state;\n  }\n};\n\n\nconst currentCardIndex = ( state = initialState.currentCardIndex, action = {} ) => {\n  switch (action.type) {\n    case types.SELECT_CARD:\n      return action.payload.index;\n    case types.DESELECT_CARD:\n      return null;\n    default:\n      return state;\n  }\n};\n\nconst finalText = ( state = initialState.finalText, action = {} ) => {\n  switch (action.type) {\n    case types.SET_FINAL_TEXT:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nconst cardsReducer = combineReducers({\n  cards,\n  currentCardIndex,\n  finalText,\n});\n\nexport default cardsReducer;\n","export const UPDATE_CARD = 'UPDATE_CARD';\nexport const UPDATE_QUESTION = 'UPDATE_QUESTION';\nexport const SELECT_CARD = 'SELECT_CARD';\nexport const DESELECT_CARD = 'DESELECT_CARD';\nexport const SET_FINAL_TEXT = 'SET_FINAL_TEXT';\n\n","import { createStore, applyMiddleware, combineReducers, compose } from 'redux';\n// import createSagaMiddleware from 'redux-saga'\nimport thunk from 'redux-thunk';\nimport cardsReducer from './reducers';\n\n// import * as reducers from './ducks';\n\n// export const sagaMiddleware = createSagaMiddleware()\nconst middleware = process.env.NODE_ENV === 'production' ? [thunk] : [thunk];\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ||  compose;\nconst enhancer = composeEnhancers( applyMiddleware(...middleware) );\n\nexport default function configureStore(initialState = {}) {\n\tconst store = createStore( cardsReducer, initialState, enhancer );\n\treturn store;\n}\n\n","import * as types from './types';\n\n\nexport const updateCard = ( data ) => ({\n  type: types.UPDATE_CARD,\n  payload: data\n});\n\nexport const updateQuestion = ( data ) => ({\n\ttype: types.UPDATE_QUESTION,\n\tpayload: data\n});\n\nexport const deselectCard = () => ({\n\ttype: types.DESELECT_CARD\n});\n\nexport const selectCard = ( index ) => ({\n\ttype: types.SELECT_CARD,\n\tpayload: { index }\n});\n\nexport const setFinalText = ( data ) => ({\n  type: types.SET_FINAL_TEXT,\n  payload: data\n});\n","export const isCardSelected = (card, state) => {\n\treturn card.index == state.currentCardIndex;\n};\n\nexport const getCardFromIndex = (cardIndex, state) => {\n  return state.cards.find(card => card.index === cardIndex);\n};\n\nexport const getCompletedCards = (state, direction=true) => {\n  return state.cards.filter(({completed}) => !direction ^ completed);\n};\n\nexport const getPendingCards = (state, direction=true) => {  // cards that are not complete and not waiting\n  return state.cards.filter(({completed, waiting}) => direction ^ (completed || waiting));\n};\n\nexport const getQuestionFromId = (questionId, state) => {\n  state.cards.forEach((cardFor) => {\n    const cardMatchingQuestion = cardFor.questions.find(questionFor => questionFor.id === questionId);\n    if (cardMatchingQuestion) return cardMatchingQuestion;\n  });\n};\n\nexport const getTotalCards = (state) => {\n  return state.cards.length;\n};\n\nexport const getCurrentCardIndex = (state) => {\n  return state.currentCardIndex;\n};\n\nexport const getCurrentCard = (state) => {\n  return getCardFromIndex(getCurrentCardIndex(state), state);\n};\n\nexport const getQuestionCardFromId = (questionId, state) => {\n  const question = getQuestionFromId(questionId, state);\n  return getCardFromIndex(question.card, state);\n};\n","export const arrayDiff = (a, b) => {\n  return a.filter(itemFor => b.indexOf(itemFor) < 0);\n};\n\nexport const flattenList = (list) => {\n  return list.reduce(\n    (accumulator, itemFor) => [\n      ...accumulator, ...itemFor\n    ],\n    []\n  );\n};\n\nexport const flattenDict = (dict) => {\n  return Object.values(dict).reduce(\n    (accumulator, itemFor) => ({\n      ...accumulator, ...itemFor,\n    }),\n    {}\n  );\n};\n\nexport const noop = () => null;\n\nexport const sameArray = (a, b) => {\n  return a.length === b.length && arrayDiff(a, b).length === 0;\n};\n\nexport const getLocale = (key) => {\n  try {\n    const localKey = window.CEPA.locales[key];\n    return localKey[window.CEPA.lang] || localKey.en || key;\n  } catch (error) {\n    return key;\n  }\n};\n\nexport const loadScript = (url, callback=noop) => {\n  var script = window.document.createElement('script');\n  script.type = 'text/javascript';\n  if (script.readyState){  //IE\n    script.onreadystatechange = function() {\n      if (script.readyState == 'loaded' || script.readyState == 'complete') {\n        script.onreadystatechange = null;\n        callback();\n      }\n    };\n  } else {  //Others\n    script.onload = function(){\n      callback();\n    };\n  }\n  script.src = url;\n  document.getElementsByTagName('head')[0].appendChild(script);\n};\n\n\nexport const validateEmail = (email) => {\n  const validEmailRe = /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/;\n  return validEmailRe.test(email);\n};\n\n\nexport const getParameterByName = (name, url = window.location.href) => {\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n};\n\n\nexport const getIsoDateString = (plainValue) => {\n  let day, month, year, isoDateString;\n  const humanDateFormatParts = plainValue.split('/');\n  if (humanDateFormatParts.length === 3){\n    year = humanDateFormatParts[2];\n    if (window.CEPA.lang === 'es' || window.CEPA.lang === 'pt'){\n      day = humanDateFormatParts[0];\n      month = humanDateFormatParts[1];\n    } else {\n      month = humanDateFormatParts[0];\n      day = humanDateFormatParts[1];\n    }\n    isoDateString = year + '-' + month + '-' + day;\n  }else{\n    isoDateString = plainValue;\n  }\n  return isoDateString;\n};\n","import React, { Fragment, useRef, useEffect } from 'react';\n\n\nfunction QuestionType1({ answer, disabled, htmlId, index, inputType, onChange=noop, selected }) {\n  const inputEl = useRef(null);\n\n  useEffect(() => {\n    if (index===0 && selected && !disabled)\n    inputEl.current.focus();\n  }, [disabled, index, selected]);\n\n  return (\n    <Fragment>\n      <input\n        type={inputType || \"text\"}\n        id={htmlId}\n        className=\"form-control\"\n        readOnly={disabled}\n        ref={inputEl}\n        name={htmlId}\n        value={answer}\n        onChange={(event) => onChange(event.currentTarget.value)}\n      />\n    </Fragment>\n  );\n}\n\nQuestionType1.getValidValueForTest = (data) => {\n  return 'test short text';\n};\n\nexport default QuestionType1;\n","import React from 'react';\nimport { getIsoDateString } from '../utils';\nimport QuestionType1 from './QuestionType1';\n\n\nfunction QuestionType2(props) {\n\n  function handleChange(value) {\n    props.onChange(getIsoDateString(value));\n  }\n\n  return (\n    <QuestionType1\n      {...props}\n      onChange={handleChange}\n      inputType=\"date\"\n    />\n  );\n}\n\nQuestionType2.getValidValueForTest = (data) => {\n  const inputValue = {\n    vt: '10/31/1976',\n    in: '10/31/1976',\n    id: '10/31/1976',\n    ph: '10/31/1976',\n    pk: '10/31/1976',\n    en: '10/31/1976',\n    es: '31/10/1976',\n    pt: '31/10/1976',\n  }[window.CEPA.lang];\n  return getIsoDateString(inputValue);\n};\n\nQuestionType2.parseValue = ($div) => {\n  const inputValue = $('input[type=\"date\"]', $div).val();\n  return getIsoDateString(inputValue);\n};\n\nexport default QuestionType2;\n","import React from 'react';\n\n\nexport default function Choice({ answer, data: { label, id }, disabled, onChange, choiceType='radio' }) {\n\n  const htmlId = `id-${id}`;\n  const checked = (choiceType === 'checkbox') ? answer.includes(id) : answer===id;\n\n  return (\n    <div className={`cepa-choice custom-control custom-${choiceType}`}>\n      <input\n      className=\"custom-control-input\"\n      type={choiceType}\n      id={htmlId}\n      disabled={disabled}\n      name={id}\n      value={id}\n      checked={checked}\n      onChange={onChange}\n    />\n    <label\n      className=\"custom-control-label\"\n      htmlFor={htmlId}\n      disabled={disabled}\n    >\n      {label}\n    </label>\n    </div>\n  );\n\n}\n","import React, { Fragment }  from 'react';\nimport { noop } from '../utils';\nimport Choice from './Choice';\n\n\nfunction QuestionType3(props) {\n\n  const content = props.properties.choices.map((choiceDataFor, index) => (\n    <Choice\n      {...props}\n      key={index}\n      data={choiceDataFor}\n      onChange={(event) => props.onChange(event.currentTarget.value)}\n    />\n  ));\n  return (\n    <Fragment>\n      { content }\n    </Fragment>\n  );\n}\n\nconst parseChoices = ($div) => {\n  const choices = [];\n  $('input[type=\"radio\"]', $div).each((index, inputFor) => {\n    const $inputFor = $(inputFor);\n    choices.push({\n      id: $inputFor.attr('value'),\n      label: $inputFor.parent().text(),\n    });\n  });\n  return choices;\n};\n\nQuestionType3.getValidValueForTest = ({ properties: { choices } }) => {\n  return choices[0].id;\n};\n\nQuestionType3.parseProperties = ($div) => {\n  return {\n    choices: parseChoices($div),\n  };\n};\n\nQuestionType3.nextIfValid = true;\n\nexport default QuestionType3;\n","import React  from 'react';\nimport { noop } from '../utils';\n\n\nfunction QuestionType4({ answer, disabled, properties: { options }, htmlId, index, onChange=noop }) {\n  const content = options.map(({ id, label }, index) => (\n    <option\n      key={index}\n      value={id}\n    >\n      { label }\n    </option>\n  ));\n  return (\n    <select\n      id={htmlId}\n      disabled={disabled}\n      value={answer}\n      className=\"custom-select\"\n      onChange={(event) => onChange(event.currentTarget.value)}\n    >\n      { content }\n    </select>\n  );\n}\n\nconst parseOptions = ($div) => {\n  const options = [];\n  $('option', $div).each((index, optionFor) => {\n    const $optionFor = $(optionFor);\n    options.push({\n      id: $optionFor.attr('value'),\n      label: $optionFor.text(),\n    });\n  });\n  return options;\n};\n\nQuestionType4.getValidValueForTest = ({ properties: { options } }) => {\n  return options[1].id;\n};\n\nQuestionType4.parseProperties = ($div) => {\n  return {\n    options: parseOptions($div),\n  };\n};\n\nQuestionType4.nextIfValid = true;\n\nexport default QuestionType4;\n","import React, { Fragment, useRef } from 'react';\nimport { getLocale } from '../utils';\nimport QuestionType1 from './QuestionType1';\n\n\nfunction QuestionType6(props) {\n  const { answer, htmlId, onChange, disabled } = props;\n\n  const inputEl = useRef(null);\n  const selectEl = useRef(null);\n\n  let quantity = '';\n  let units = window.CEPA.lang === 'en' ? 'm' : 'k';\n  if (answer) {\n    quantity = answer.slice(0,-1);\n    units = answer.slice(-1);\n  }\n\n  function handleChange(event) {\n    onChange(inputEl.current.value + selectEl.current.value);\n  }\n\n  return (\n    <Fragment>\n      <input\n        type=\"number\"\n        id={htmlId}\n        className=\"form-control\"\n        readOnly={disabled}\n        ref={inputEl}\n        name={htmlId}\n        value={quantity}\n        onChange={handleChange}\n      />\n      <select\n        disabled={disabled}\n        className=\"custom-select\"\n        onChange={handleChange}\n        ref={selectEl}\n        value={units}\n      >\n        <option value=\"k\">{getLocale('kmts')}</option>\n        <option value=\"m\">{getLocale('miles')}</option>\n      </select>\n    </Fragment>\n  );\n}\n\nQuestionType6.isValid = (answer) => {\n  if (!answer || answer.length < 2) return false;\n  const quantity = answer.slice(0,-1);\n  const units = answer.slice(-1);\n  return (units === 'k' || units === 'm')  && !isNaN(quantity);\n};\n\nQuestionType6.getValidValueForTest = (data) => {\n  return '100k';\n};\n\nexport default QuestionType6;\n","import React, { Fragment, useRef } from 'react';\nimport { getLocale } from '../utils';\nimport { getIsoDateString } from '../utils';\nimport QuestionType2 from './QuestionType2';\n\n\nfunction QuestionType7(props) {\n  const { answer, htmlId, onChange, disabled } = props;\n\n  const inputEl = useRef(null);\n  const checkboxEl = useRef(null);\n\n  let date = '';\n  let never = false;\n  if (answer==='0') {\n    never = true;\n  } else if (answer) {\n    date = answer;\n  }\n\n  function handleChange(event) {\n    if (checkboxEl.current.checked) {\n      onChange('0');\n    } else {\n      onChange(getIsoDateString(inputEl.current.value));\n    }\n  }\n\n  const checkboxHtmlId = `checkbox-${htmlId}`;\n  return (\n    <Fragment>\n      <input\n        type=\"date\"\n        id={htmlId}\n        className=\"form-control\"\n        readOnly={disabled}\n        ref={inputEl}\n        name={htmlId}\n        value={date}\n        onChange={handleChange}\n      />\n      <div className=\"cepa-choice custom-control custom-checkbox\">\n        <input\n          className=\"custom-control-input\"\n          type='checkbox'\n          id={checkboxHtmlId}\n          disabled={disabled}\n          checked={never}\n          onChange={handleChange}\n          ref={checkboxEl}\n        />\n        <label\n          className=\"custom-control-label\"\n          htmlFor={checkboxHtmlId}\n          disabled={disabled}\n        >\n          {getLocale('never')}\n        </label>\n      </div>\n    </Fragment>\n  );\n}\n\nQuestionType7.getValidValueForTest = QuestionType2.getValidValueForTest;\n\nexport default QuestionType7;\n","import React, { Fragment }  from 'react';\nimport { noop } from '../utils';\nimport Choice from './Choice';\n\n\nfunction QuestionType8(props) {\n\n  function alterArrayItem(array, item, direction) {\n    if (direction) {\n      return [...array, item];\n    } else {\n      return array.filter(itemFor => itemFor !== item);\n    }\n  }\n\n  function handleChange(event) {\n    const checkbox = event.currentTarget;\n    const newAnswer = alterArrayItem(props.answer, checkbox.value, checkbox.checked);\n    props.onChange(newAnswer);\n  }\n\n  const content = props.properties.choices.map((choiceDataFor, index) => (\n    <Choice\n      {...props}\n      key={index}\n      data={choiceDataFor}\n      choiceType=\"checkbox\"\n      onChange={handleChange}\n    />\n  ));\n  return (\n    <Fragment>\n      { content }\n    </Fragment>\n  );\n}\n\nconst parseChoices = ($div) => {\n  const choices = [];\n  $('input[type=\"checkbox\"]', $div).each((index, inputFor) => {\n    const $inputFor = $(inputFor);\n    choices.push({\n      id: $inputFor.attr('value'),\n      label: $inputFor.parent().text(),\n    });\n  });\n  return choices;\n};\n\nQuestionType8.getValidValueForTest = ({ properties: { choices } }) => {\n  return [choices[0].id,];\n};\n\nQuestionType8.parseProperties = ($div) => {\n  return {\n    choices: parseChoices($div),\n  };\n};\n\nexport default QuestionType8;\n","import React from 'react';\nimport { validateEmail } from '../utils';\nimport QuestionType1 from './QuestionType1';\n\n\nfunction QuestionType9(props) {\n  return (\n    <QuestionType1 {...props} inputType=\"email\" />\n  );\n}\n\nQuestionType9.getValidValueForTest = (data) => {\n  return 'test@example.com';\n};\n\nQuestionType9.isValid = (answer) => {\n  return validateEmail(answer);\n};\n\nexport default QuestionType9;\n","import React, { Fragment, useRef, useEffect } from 'react';\n\n\nfunction QuestionType11({ answer, disabled, htmlId, index, onChange=noop, selected }) {\n  const inputEl = useRef(null);\n\n  useEffect(() => {\n    if (index===0 && selected && !disabled)\n    inputEl.current.focus();\n  }, [disabled, index, selected]);\n\n  return (\n    <Fragment>\n      <textarea\n        id={htmlId}\n        className=\"form-control\"\n        readOnly={disabled}\n        ref={inputEl}\n        name={htmlId}\n        value={answer}\n        onChange={(event) => onChange(event.currentTarget.value)}\n      >{answer}</textarea>\n    </Fragment>\n  );\n}\n\nQuestionType11.getValidValueForTest = (data) => {\n  return 'Test long text lorem ipsum.\\nAnother line.';\n};\n\nexport default QuestionType11;\n","import React from 'react';\nimport QuestionType2 from './QuestionType2';\n\n\nfunction QuestionType12(props) {\n  return (\n    <QuestionType2\n      {...props}\n    />\n  );\n}\n\nQuestionType12.getValidValueForTest = QuestionType2.getValidValueForTest;\n\nQuestionType12.parseValue = QuestionType2.parseValue;\n\nQuestionType12.isValid = (answer) => {\n  const years = new Date(new Date() - new Date(answer)).getFullYear() - 1970;\n  return years >= 18;\n};\n\n\nexport default QuestionType12;\n","import React, { useRef, useEffect } from 'react';\n\n/**\n * Creates DOM element to be used as React root.\n * @returns {HTMLElement}\n */\nfunction createRootElement(id) {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\n/**\n * Appends element as last child of body.\n * @param {HTMLElement} rootElem\n */\nfunction addRootElement(rootElem) {\n  document.body.append(rootElem);\n}\n\n/**\n * Hook to create a React Portal.\n * Automatically handles creating and tearing-down the root elements (no SRR\n * makes this trivial), so there is no need to ensure the parent target already\n * exists.\n * @example\n * const target = usePortal(id, [id]);\n * return createPortal(children, target);\n * @param {String} id The id of the target container, e.g 'modal' or 'spotlight'\n * @returns {HTMLElement} The DOM node to use as the Portal target.\n */\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n\n  useEffect(function setupElement() {\n    // Look for existing target dom element to append to\n    const existingParent = document.querySelector(`#${id}`);\n    // Parent is either a new root or the existing dom element\n    const parentElem = existingParent || createRootElement(id);\n\n    // If there is no existing DOM element, add a new one.\n    if (!existingParent) {\n      addRootElement(parentElem);\n    }\n\n    // Add the detached element to the parent\n    parentElem.appendChild(rootElemRef.current);\n\n    return function removeElement() {\n      rootElemRef.current.remove();\n      if (parentElem.childNodes.length === -1) {\n        parentElem.remove();\n      }\n    };\n  }, []);\n\n  /**\n   * It's important we evaluate this lazily:\n   * - We need first render to contain the DOM element, so it shouldn't happen\n   *   in useEffect. We would normally put this in the constructor().\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\n   *   since this will run every single render (that's a lot).\n   * - We want the ref to consistently point to the same DOM element and only\n   *   ever run once.\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n   */\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;\n","import React from 'react';\nimport { createPortal } from 'react-dom';\nimport usePortal from './usePortal';\n\n/**\n * @example\n * <Portal>\n *   <p>Thinking with portals</p>\n * </Portal>\n */\nconst Portal = ({ id, children }) => {\n  const target = usePortal(id);\n  return createPortal(\n    children,\n    target,\n  );\n};\n\nexport default Portal;\n","import React, { useEffect, useRef, useState }  from 'react';\nimport { getLocale } from '../utils';\nimport Portal from '../../utils/Portal';\nimport YouTube from 'react-youtube';\n\n\nfunction QuestionType15({ answer, id, card, properties: { youtubeId, width=1920, height=1080 }, onChange=noop, selected, selectCard }) {\n  const [hidden, setHidden] = useState(false);\n  const [playing, setPlaying] = useState(false);\n  const videoWrapper = useRef(null);\n  const videoElement = useRef(null);\n\n  const prevSelectedRef = React.useRef(false);\n  React.useEffect(() => {\n    if (prevSelectedRef.current && !selected && playing) {\n      videoElement.current.internalPlayer.pauseVideo();\n    }\n    prevSelectedRef.current = selected; // cache current value for next render\n  }, [selected, playing]);\n\n  useEffect(() => {\n    window.addEventListener('scroll', () => {\n      setHidden(playing && videoWrapper.current.getBoundingClientRect().bottom < videoWrapper.current.offsetHeight / 2);\n    });\n  });\n\n  const handleOnStateChange = (event) => {\n    switch(event.data) {\n      case 1:\n        setPlaying(true);\n        break;\n      default:\n        setPlaying(false);\n    }\n  };\n\n  const handleBackToVideo = () => {\n    selectCard(card);\n    window.CEPA.scrollToElement(videoWrapper.current);\n  };\n\n  const handleVideoEnded = () => {\n    onChange(true);\n  };\n\n\n  const options = {\n    height: '100%',\n    width: '100%',\n    playerVars: {\n      // 'autoplay': 0,\n      // 'controls': 1,\n      // 'suggestedQuality': 'small',\n      // 'mute': 0,\n      'enablejsapi': 1,\n      'modestbranding': 1,\n      'playsinline': 1,\n      'showinfo': 0,\n      'rel': 0,\n      // 'origin': 'http://localhost:3000/'\n    }\n  };\n\n  // player.playVideo():Void\n  // player.pauseVideo():Void\n  // player.stopVideo():Void\n  // player.seekTo(seconds:Number, allowSeekAhead:Boolean):Void\n\n  // player.mute():Void\n  // player.unMute():Void\n  // player.isMuted():Boolean\n  // player.setVolume(volume:Number):Void\n  // player.getVolume():Number\n\n  // player.setSize(width:Number, height:Number):Object\n  // player.getPlaybackRate():Number\n  // player.setPlaybackRate(suggestedRate:Number):Void\n  // player.getAvailablePlaybackRates():Array\n\n  // player.getPlayerState():Number\n  //   -1 – unstarted\n  //   0 – ended\n  //   1 – playing\n  //   2 – paused\n  //   3 – buffering\n  //   5 – video cued\n\n  // player.getVideoLoadedFraction():Float\n  // player.getCurrentTime():Number\n  // player.getDuration():Number\n\n  // player.destroy():Void\n\n  // onReady={func}                    // defaults -> noop\n  // onStateChange={func}              // defaults -> noop\n  // onPlaybackQualityChange={func}    // defaults -> noop\n  // onPlaybackRateChange={func}       // defaults -> noop\n  // onError={func}                    // defaults -> noop\n\n  // onPlay={func}                     // defaults -> noop\n  // onPause={func}                    // defaults -> noop\n  // onEnd={func}                      // defaults -> noop\n\n  return (\n    <div className={`video-player${hidden ? ' hidden' : ''}`}>\n      <div\n        className='ratio-grid'\n        ref={videoWrapper}\n      >\n        <div>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox={`0 0 ${width} ${height}`} />\n        </div>\n        <YouTube\n          ref={videoElement}\n          videoId={youtubeId}\n          opts={options}\n          // onReady={this.handleOnReady}\n          onStateChange={handleOnStateChange}\n          // onError={this.handleOnError}\n          onEnd={handleVideoEnded}\n          // className=''\n          // containerClassName=''\n        />\n      </div>\n\n      <Portal id=\"back-to-video-portal\">\n        <div className={`back-to-video-wrapper${hidden ? ' video-player-hidden' : ''}`}>\n          <button\n            className=\"back-to-video\"\n            onClick={handleBackToVideo}\n          >\n            {getLocale('backToVideo')}\n            <i className=\"icon-arrows-green\" />\n          </button>\n        </div>\n      </Portal>\n    </div>\n  );\n}\n\nQuestionType15.dontEdit = true;\n\nQuestionType15.getValidValueForTest = (data) => {\n  return true;\n};\n\nQuestionType15.parseProperties = ($div) => {\n  const youtubeId = $div.data('youtube-id');\n  const width = $div.data('width');\n  const height = $div.data('height');\n  return {\n    youtubeId,\n    width,\n    height,\n  };\n};\n\nQuestionType15.nextIfValid = true;\n\nexport default QuestionType15;\n","import React, { useEffect, useRef, useState }  from 'react';\nimport { getLocale } from '../utils';\nimport Portal from '../../utils/Portal';\n\nconst STATE_STOP = 'STATE_STOP';\nconst STATE_PLAYING = 'STATE_PLAYING';\nconst STATE_ENDED = 'STATE_ENDED';\n\nfunction QuestionType16({ answer, id, card, properties: { videoURL }, onChange=noop, selectCard }) {\n  const [videoState, setVideoState] = useState(STATE_STOP);\n  const [videoReady, setVideoReady] = useState(false);\n  const [hidden, setHidden] = useState(false);\n  const videoElement = useRef(null);\n\n  useEffect(() => {\n    window.addEventListener('scroll', () => {\n      setHidden(videoState==STATE_PLAYING && videoElement.current.getBoundingClientRect().bottom < videoElement.current.offsetHeight / 2);\n    });\n  });\n\n  const handleVideoEnded = () => {\n    setVideoState(STATE_ENDED);\n    onChange(true);\n  };\n\n  const handleVideoCanPlay = () => {\n    setVideoReady(true);\n  };\n\n  const handleVideoPlay = () => {\n    setVideoState(STATE_PLAYING);\n  };\n\n  const handleVideoPause = () => {\n    setVideoState(STATE_STOP);\n  };\n\n  const handlePlay = () => {\n    videoElement.current.play();\n  };\n\n  const handleBackToVideo = () => {\n    selectCard(card);\n    window.CEPA.scrollToElement(videoElement.current);\n  };\n\n  const overlayContent = {\n    [STATE_STOP]:\n      videoReady ? (\n        <div className=\"full-content clickable\" onClick={handlePlay}>\n          <div className=\"centered-content\">\n            <div className=\"icon-play-container\" />\n            <h3>{getLocale('start')}</h3>\n          </div>\n        </div>\n      ) : null,\n    [STATE_ENDED]: (\n      <div className=\"full-content clickable\" onClick={handlePlay}>\n        <div className=\"centered-content\">\n          <div className=\"icon-play-container\" />\n          <h3>{getLocale('restart')}</h3>\n        </div>\n      </div>\n    ),\n  }[videoState];\n\n  const overlay = overlayContent ? (\n    <div className=\"video-player-overlay\">{ overlayContent }</div>\n  ) : null;\n\n  return (\n    <div className={`video-player${hidden ? ' hidden' : ''}`}>\n      <video\n        controls=\"controls\"\n        onCanPlay={handleVideoCanPlay}\n        onPause={handleVideoPause}\n        onPlay={handleVideoPlay}\n        onEnded={handleVideoEnded}\n        ref={videoElement}\n        src={videoURL}\n      />\n      { overlay }\n      <Portal id=\"back-to-video-portal\">\n        <div className={`back-to-video-wrapper${hidden ? ' video-player-hidden' : ''}`}>\n          <button\n            className=\"back-to-video\"\n            onClick={handleBackToVideo}\n          >\n            {getLocale('backToVideo')}\n            <i className=\"icon-arrows-green\" />\n          </button>\n        </div>\n      </Portal>\n    </div>\n  );\n}\n\nQuestionType16.dontEdit = true;\n\nQuestionType16.getValidValueForTest = (data) => {\n  return true;\n};\n\nQuestionType16.parseProperties = ($div) => {\n  const videoURL = $div.data('video-url') || `http://testing.cepadc.com/flash/assessment/videos/video_${$div.data('video-id')}.mp4`;\n  return {\n    videoURL,\n  };\n};\n\nQuestionType16.nextIfValid = true;\n\nexport default QuestionType16;\n","import React, { Component }  from 'react';\nimport { connect }  from 'react-redux';\nimport * as operations from '../state/operations';\nimport * as selectors from '../state/selectors';\nimport { noop } from './utils';\nimport * as questions from './questions';\n\n\nconst cacheTypeComponents = {};\n\nconst addGenericProperties = (QuestionTypeComponent, type) => {\n  const genericProperties = {\n    isValid: (answer) => Boolean(answer),\n    nextIfValid: false,\n    dontEdit: false,\n    parseCompleted: ($div) => $div.data('completed'),\n    parseID: ($div) => $div.attr('id').slice(2),\n    parseProperties: ($div) => {},\n    parseTitle: ($div) => $div.find('label[for]').text(),\n    parseValue: ($div) => {\n      const $inputs = $('input, select, textarea', $div);\n      if ($inputs.length > 1){\n        const inputsType = $inputs.attr('type');\n        const $checked = $inputs.filter(':checked');\n        if (inputsType==='checkbox'){\n          var values = [];\n          $checked.each(function(index, element){\n            values.push($(element).val());\n          });\n          return values;\n        }else if (inputsType==='radio'){\n          if (type===13){\n            return this._getValueType13();\n          }else if (type===14){\n            return this._getValueType14();\n          }else{\n            return $checked.val();\n          }\n        }\n      }else{\n        return $inputs.val();\n      }\n    },\n    type\n  };\n  Object.entries(genericProperties).forEach(([name, value], index) => {\n    if (QuestionTypeComponent[name] === undefined) {\n      QuestionTypeComponent[name] = value;\n    }\n  });\n  return QuestionTypeComponent;\n};\n\nexport const getQuestionTypeComponent = (type) => {\n  if (cacheTypeComponents[type]) return cacheTypeComponents[type];\n  const QuestionTypeComponent = questions['QuestionType'+type];\n  addGenericProperties(QuestionTypeComponent, type);\n  cacheTypeComponents[type] = QuestionTypeComponent;\n  return QuestionTypeComponent;\n};\n\nexport default @connect(\n  (state, props) => ({\n  }),\n  operations\n)\nclass Question extends Component {\n\n  constructor(props) {\n    super(props);\n    this.QuestionTypeComponent = getQuestionTypeComponent(props.type);\n  }\n\n  handleAnswerChange = (value) => {\n    const { id, updateQuestion } = this.props;\n    const valid = this.QuestionTypeComponent.isValid(value);\n    updateQuestion({\n      id,\n      answer: value,\n      valid,\n    });\n  }\n\n  render() {\n    const { completed, id, lastQuestion, readOnly, title, type, error, waiting } = this.props;\n    const htmlId = `id-${id}`;\n    const disabled = readOnly || waiting;\n    return (\n      <div id={`q${id}`} className={`cepa-question form-group question-type-${ type }${ completed ? ' completed' : ''}${ error ? ' error' : ''}${ lastQuestion ? ' last-question' : ''}`}>\n        {\n          title && (\n            <label\n              className=\"cepa-question__label\"\n              disabled={disabled}\n              htmlFor={htmlId}\n            >\n            { title }</label>\n          )\n        }\n        <this.QuestionTypeComponent\n          {...this.props}\n          disabled={disabled}\n          htmlId={htmlId}\n          onChange={this.handleAnswerChange}\n        />\n        {\n          error && (<div className=\"error-text\">{ error }</div>)\n        }\n      </div>\n    );\n  }\n\n}\n","import * as actions from './actions';\nimport * as selectors from './selectors';\nimport { getQuestionTypeComponent } from '../components/Question';\n\n\nexport const getClampIndex = ( index, getState ) => {\n  const totalCards = selectors.getTotalCards(getState());\n  const clampIndex = Math.max(0, Math.min(totalCards-1, index));\n  return clampIndex;\n};\n\nexport const selectCard = ( index ) => ( dispatch, getState ) => {\n  const currentCardIndex = selectors.getCurrentCardIndex(getState());\n  const clampIndex = getClampIndex(index, getState);\n  if (clampIndex !== currentCardIndex) dispatch(actions.selectCard(clampIndex));\n};\n\nexport const deltaCard = ( quantity ) => ( dispatch, getState ) => {\n  const currentCardIndex = selectors.getCurrentCardIndex(getState());\n  const clampIndex = getClampIndex(currentCardIndex + quantity, getState);\n  if (clampIndex !== currentCardIndex) dispatch(actions.selectCard(clampIndex));\n};\n\nexport const updateQuestionCallback = ( data ) => ( dispatch, getState ) => {\n  dispatch(actions.updateQuestion(data));\n  return Promise.resolve();\n};\n\nexport const answerCurrentCardForTest = () => ( dispatch, getState ) => {\n  const card = selectors.getCurrentCard(getState());\n  card.questions.forEach((questionDataFor) => {\n    const questionTypeComponent = getQuestionTypeComponent(questionDataFor.type);\n    const validValueForTest = questionTypeComponent.getValidValueForTest(questionDataFor);\n    dispatch(actions.updateQuestion({\n      id: questionDataFor.id,\n      answer: validValueForTest,\n      valid: true,\n    }));\n  });\n};\n\nexport const prevCard = () => deltaCard(-1);\n\nexport const nextCard = () => deltaCard(1);\n\nexport const gotoFirstUncompletedCard = (excludeIndex) => ( dispatch, getState ) => {\n\n  let pendingCards = selectors.getPendingCards(getState(), true);\n  pendingCards = pendingCards.filter(({index}) => index !== excludeIndex);\n  if (pendingCards.length) {\n    dispatch(actions.selectCard(pendingCards[0].index));\n  }\n};\n\nexport const deselectCard = actions.deselectCard;\nexport const updateCard = actions.updateCard;\nexport const updateQuestion = actions.updateQuestion;\nexport const setFinalText = actions.setFinalText;\n","import React, { Fragment, Component } from 'react';\nimport { connect, useDispatch, useSelector, useState } from 'react-redux';\nimport { noop, getLocale, getParameterByName } from './utils';\nimport * as operations from '../state/operations';\nimport * as selectors from '../state/selectors';\nimport axios from 'axios';\nimport Question, { getQuestionTypeComponent } from './Question';\n\n\nexport function Buttons({ index, canEdit, completed, editing, onSubmit, onToggleEdit, readOnly, selected, valid, waiting }) {\n  const totalCards = useSelector(state => selectors.getTotalCards(state));\n  const dispatch = useDispatch();\n  const prevVisible = index > 0;\n  const nextVisible = index < totalCards - 1;\n  const submitButton = (\n    <button\n      className=\"btn btn-primary\"\n      disabled={!valid || waiting}\n      onClick={onSubmit}\n    >\n      { waiting ? getLocale('submitting') : getLocale('submit') }\n    </button>\n  );\n  const editButton = (\n    <button\n      className=\"btn btn-primary-outline\"\n      onClick={ onToggleEdit }\n    >\n      { editing ? getLocale('cancel') : getLocale('edit') }\n    </button>\n  );\n\n  return (\n      <div className=\"card__buttons\">\n\n        <div className=\"card__buttons__actions\">\n          { canEdit && completed && editButton }\n          { canEdit && !readOnly && submitButton }\n        </div>\n\n        <div className=\"card__buttons__arrows\">\n          { prevVisible && (\n            <button\n              disabled={!selected}\n              className=\"arrow-prev\"\n              onClick={() => dispatch(operations.prevCard())}\n            >\n              {getLocale('previous')}\n            </button>\n          ) }\n          { nextVisible && (\n            <button\n              disabled={!selected}\n              className=\"arrow-next\"\n              onClick={() => dispatch(operations.nextCard())}\n            >\n              {getLocale('next')}\n            </button>\n          ) }\n        </div>\n      </div>\n  );\n}\n\nexport default @connect(\n  null,\n  operations,\n  null,\n  {\n    forwardRef: true,\n  },\n)\nclass Card extends Component {\n\n  state = {\n    canEdit: true,\n    editing: false,\n    readyToSubmit: false,\n  }\n\n  constructor(props) {\n    super(props);\n    this.cardRef = React.createRef();\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { completed: cardCompleted, questions, index } = nextProps;\n    const { editing } = prevState;\n    const nextState = {};\n\n    const readyToSubmit = questions.every(({type, completed, valid}, index) => {\n      const nextIfValid = getQuestionTypeComponent(type).nextIfValid;\n      const readyToSubmitFor = ((!cardCompleted || !completed || editing) && valid && nextIfValid);\n      return readyToSubmitFor;\n    }\n    );\n    if (readyToSubmit !== prevState.readyToSubmit) nextState.readyToSubmit = readyToSubmit;\n\n    const dontEdit = questions.every(({type}) => getQuestionTypeComponent(type).dontEdit);\n    const canEdit = !dontEdit;\n    if (canEdit !== prevState.canEdit) nextState.canEdit = canEdit;\n    return nextState;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { editing, readyToSubmit } = this.state;\n    const { editing: wasEditing, readyToSubmit: wasReadyToSubmit } = prevState;\n    const { selected } = this.props;\n    const { selected: wasSelected } = prevProps;\n\n    if (selected && selected !== wasSelected) {\n      window.CEPA.scrollToElement(this.cardRef.current);\n    }\n    if (readyToSubmit && !wasReadyToSubmit && !(editing && !wasEditing)) {\n      this.handleSubmit();\n    }\n  }\n\n  getPayload = () => {\n    const { questions } = this.props;\n    const answers = questions.map(\n      ({ id, answer }) => ({ id, answer })\n    );\n    return {\n      module: window.CEPA.module,\n      answers,\n    };\n  }\n\n  fetchData = (url, data) => {\n    const { index } = this.props;\n    const errorByParam = getParameterByName('error') !== null;\n    const developByParam = getParameterByName('develop') !== null;\n    const testError = errorByParam || (process.env.REACT_APP_TEST_ERROR === 'true');\n    const production = !developByParam && (process.env.NODE_ENV === 'production');\n    const productionConfig = {\n      url,\n      method: 'post',\n      data: encodeURIComponent(JSON.stringify(data)),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n      }\n    };\n    const developConfig = {\n      url: `_ajax/server_response_${index+1}${testError?'_error':''}.json`,\n      method: 'get',\n      params: data,\n    };\n    const response = axios(production ? productionConfig : developConfig);\n    return response;\n  }\n\n  setWaiting(direction) {\n    const { index, updateCard } = this.props;\n    updateCard({ index, waiting: direction });\n  }\n\n  sendAnswers = async () => {\n    const { valid } = this.props;\n    if (!valid) return;\n    this.setWaiting(true);\n    const postURL = window.CEPA.postURL;\n    var data = this.getPayload();\n    const response = await this.fetchData(postURL, data);\n    try {\n      this.successResponse(response.data);\n    } catch (error) {\n      console.error('error', error);\n    }\n    this.setWaiting(false);\n  }\n\n  handleSubmit = () => {\n    const { gotoFirstUncompletedCard, index, valid } = this.props;\n    if (!valid) return;\n    this.setState({\n      editing: false\n    });\n    this.sendAnswers();\n    gotoFirstUncompletedCard(index);\n  }\n\n  handleToggleEdit = () => {\n    this.setState(({editing}) => ({editing: !editing}));\n  }\n\n  completeQuestion(id, error) {\n    const { nextCard, updateQuestionCallback, completed } = this.props;\n    const questionCompleted = !Boolean(error);\n    updateQuestionCallback({\n      id,\n      completed: questionCompleted,\n      error,\n    }).then(()=>{\n    });\n  }\n\n  successResponse(data) {\n    const { setFinalText } = this.props;\n    if (data.valids) {\n      data.valids.map((id) => this.completeQuestion(id));\n    }\n    if (data.errors) {\n      data.errors.map(({id, error}) => this.completeQuestion(id, error));\n    }\n    if (data.final_text) {\n      setFinalText(data.final_text);\n    }\n  }\n\n  getUpdateAnswersData = (id, data, replace=false) => {\n    const { answers } = this.state;\n    const newAnswers = replace ?\n      { ...answers, [id]: data }\n        :\n      Object.entries(answers).reduce((accumulator, [idFor, prevData]) => {\n        accumulator[idFor] = (id !== idFor) ? prevData : { ...prevData, ...data };\n        return accumulator;\n      }, {});\n    return newAnswers;\n  }\n\n  render() {\n    const { className, index, questions, title, completed, selected, valid, waiting } = this.props;\n    const { canEdit, editing } = this.state;\n    const readOnly = !selected || (completed && !editing) || waiting;\n\n    const questionsComponents = questions.map((dataFor, questionIndex) => {\n      return (\n        <Question\n          index={questionIndex}\n          key={questionIndex}\n          lastQuestion={questionIndex === questions.length-1}\n          readOnly={readOnly}\n          selected={selected}\n          waiting={waiting}\n          {...dataFor}\n        />\n      );\n    });\n\n    return (\n      <div className={`row cepa-card ${ className }${ selected ? ' selected' : ''}${ completed ? ' completed' : ''}${ valid ? ' valid' : ''}${ waiting ? ' waiting' : ''}`} ref={this.cardRef}>\n        <div className=\"card col px-0 mb-4 shadow-sm\">\n          <div className=\"card-body\">\n            { title &&\n              <h3>{ title }</h3>\n            }\n            { questionsComponents }\n            <Buttons\n              completed={completed}\n              canEdit={canEdit}\n              editing={editing}\n              index={index}\n              onSubmit={this.handleSubmit}\n              onToggleEdit={this.handleToggleEdit}\n              readOnly={readOnly}\n              selected={selected}\n              valid={valid}\n              waiting={waiting}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React, { useEffect, useRef } from 'react';\nimport { getLocale } from './utils';\n\n\nfunction Modal({title, body, onHide}) {\n\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    const $ = window.$;\n    window.containerRef = containerRef;\n    $(containerRef.current)\n      .modal()\n      .on('hidden.bs.modal', onHide);\n  });\n\n  return (\n    <div ref={containerRef} className=\"modal fade\" id=\"\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"Success Message\" aria-hidden=\"true\">\n      <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h5 className=\"modal-title\">{title}</h5>\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div className=\"modal-body\" dangerouslySetInnerHTML={{__html: body}} />\n          <div className=\"modal-footer\">\n            <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\">{getLocale('close')}</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Modal;\n","import React, { Component, Fragment }  from 'react';\nimport ReactDOM from 'react-dom';\nimport { connect } from 'react-redux';\nimport * as selectors from '../state/selectors';\nimport { noop, sameArray } from './utils';\nimport Card from './Card';\nimport Modal from './Modal';\n\nconst $ = window.$;\n\n\nexport function Controls({ currentCardIndex, totalCards }) {\n  const reactChild = (\n    <div className=\"cepa-controls\">\n      {/*<button className=\"btn btn-sm btn-outline-primary controls__prev-btn\" onClick={onPrev} disabled={current===0}>Prev</button>*/}\n      <span className=\"controls__numbers\">{currentCardIndex+1} / {totalCards}</span>\n      {/*<button className=\"btn btn-sm btn-outline-primary controls__next-btn\" onClick={onNext} disabled={current===total-1}>Next</button>*/}\n    </div>\n  );\n  const container = document.querySelector('.cepa-controls-wrapper');\n  return container && ReactDOM.createPortal( reactChild, container );\n}\n\nexport function Version({ version }) {\n  const reactChild = (\n    <div className=\"copyright\">v{version}</div>\n  );\n  const container = document.querySelector('.brand');\n  return container && ReactDOM.createPortal( reactChild, container );\n}\n\n\nexport default @connect(\n  (state, props) => ({\n    cards: state.cards,\n    totalCards: selectors.getTotalCards(state),\n    currentCardIndex: selectors.getCurrentCardIndex(state),\n    finalText: state.finalText,\n  })\n)\nclass Deck extends Component {\n\n  state = {\n    completed: false\n  }\n\n  constructor(props) {\n    super(props);\n    $('nav.navbar .navbar-brand').before('<div class=\"cepa-controls-wrapper\"></div>');\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { cards } = nextProps;\n    const completed = cards.every(({ completed }) => completed);\n    if (completed === prevState.completed) return {};\n    return { completed };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { finalText } = this.props;\n    const { completed } = this.state;\n    if (completed && !finalText) {\n      this.redirectIfNeeded();\n    }\n  }\n\n  redirectIfNeeded = () => {\n    if (window.CEPA.successRedirect) {\n      window.location.href = window.CEPA.successRedirect;\n    }\n  }\n\n  handleHide = () => {\n    const { completed } = this.state;\n    if (completed) {\n      this.redirectIfNeeded();\n    }\n  }\n\n  render() {\n    const { cards, currentCardIndex, finalText, totalCards } = this.props;\n    const { completed } = this.state;\n\n    const cardsComponents = cards.map((data, index) => (\n      <Card\n        key={index}\n        selected={currentCardIndex===index}\n        {...data}\n      />\n    ));\n\n    return (\n      <Fragment>\n        { Boolean(finalText) && completed && <Modal body={finalText} onHide={this.handleHide} /> }\n        <div className=\"cepa-deck\">\n          <div className=\"cepa-deck__cards container\">\n            { cardsComponents }\n          </div>\n          <Controls\n            currentCardIndex={currentCardIndex}\n            totalCards={totalCards}\n          />\n          <Version\n            version={process.env.REACT_APP_VERSION}\n          />\n        </div>\n      </Fragment>\n    );\n  }\n\n}\n","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport * as operations from '../state/operations';\nimport { flattenDict } from './utils';\nimport Deck from './Deck';\n\n\nfunction App({data}) {\n  const dispatch = useDispatch();\n\n  function keydownHandler({ key, metaKey, shiftKey }) {\n    if (metaKey && shiftKey && (key === 'u' || key === 'e')) dispatch(operations.answerCurrentCardForTest());\n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', keydownHandler);\n    return () => {\n      window.removeEventListener('keydown', keydownHandler);\n    };\n  }, []);\n\n\n  return (\n    <div className=\"cepa-app\">\n      <Deck />\n    </div>\n  );\n}\n\nexport default App;\n","import { genericIsValid, getQuestionTypeComponent } from '../components/Question';\nimport * as selectors from '../state/selectors';\n\n\nconst $ = window.$;\n\nexport function getDataFromHTML($assessment) {\n  const $fieldsets = $('> fieldset', $assessment);\n  const cards = [];\n  $fieldsets.each((cardIndex, fieldsetFor) => {\n    const $questions = $('> div[data-type]', fieldsetFor);\n    const questions = [];\n    $questions.each((questionIndex, divFor) => {\n      const $divFor = $(divFor);\n      const type = $divFor.data('type');\n      const QuestionTypeComponent = getQuestionTypeComponent(type);\n      const answer = QuestionTypeComponent.parseValue($divFor);\n      questions.push({\n        answer,\n        card: cardIndex,\n        id: QuestionTypeComponent.parseID($divFor),\n        index: questionIndex,\n        completed: QuestionTypeComponent.parseCompleted($divFor),\n        properties: QuestionTypeComponent.parseProperties($divFor),\n        title: QuestionTypeComponent.parseTitle($divFor),\n        type,\n        valid: QuestionTypeComponent.isValid(answer),\n      });\n    });\n    cards.push({\n      index: cardIndex,\n      className: fieldsetFor.className,\n      completed: questions.every(({ completed }) => completed),\n      valid: questions.every(({ valid }) => valid),\n      waiting: false,\n      questions\n    });\n  });\n\n  const initialState = {\n    cards,\n    currentCardIndex: 0,\n  };\n\n  return initialState;\n}\n\n\nexport function prepareInitialState(initialState) {\n  if (initialState.finalText === undefined) {\n    initialState.finalText = window.CEPA ? window.CEPA.finalText : '';\n  };\n  const pendingCards = selectors.getPendingCards(initialState);\n  if (pendingCards.length) {\n    initialState.currentCardIndex = pendingCards[0].index;\n  }\n  return initialState;\n}\n\n// {\n//   \"id\": \"q10532\",\n//   \"type\": 3,\n//   \"title\": \"Com relação às capacidades biológicas necessárias para se executar a tarefa de conduzir um veículo podemos considerar:\",\n//   \"answer\": \"\",\n//   \"properties\": {\n//     \"description\": \"\",\n//     \"allow_multiple_selection\": false,\n//     \"allow_other_choice\": false,\n//     \"choices\": [\n//       {\n//         \"label\": \"Visão\",\n//         \"id\": \"9\"\n//       },\n//       {\n//         \"label\": \"Coordenação motora\",\n//         \"id\": \"10\"\n//       },\n//       {\n//         \"label\": \"Reflexo\",\n//         \"id\": \"11\"\n//       },\n//       {\n//         \"label\": \"Todas as alternativas anteriores.\",\n//         \"id\": \"12\"\n//       }\n//     ]\n//   },\n//   \"validations\": {\n//     \"required\": true,\n//   },\n//   \"attachment\": {\n//     \"type\": \"image\",\n//     \"href\": \"https://via.placeholder.com/150\"\n//   }\n// }\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './utils/polyfills';\nimport configureStore from './state/store';\nimport App from './components/App';\nimport { loadScript } from './components/utils';\nimport { getDataFromHTML, prepareInitialState } from './utils/parser';\nimport * as serviceWorker from './serviceWorker';\nimport './index.scss';\n\n\nconst $ = window.$;\nconst $assessment = $('#assessment');\n\nconst dataFromHTML = getDataFromHTML($assessment);\n\nwindow.CEPA = window.CEPA || {};\nif (window.CEPA.locales === undefined) {\n  loadScript('https://www.bytelockers.com/cepa/static/js/locales.js');\n}\nwindow.CEPA.lang = $('html').attr('lang') || 'es';\nwindow.CEPA.postURL = $assessment.attr('action');\nwindow.CEPA.module = $assessment.data('module');\nwindow.CEPA.successRedirect = $assessment.data('success-redirect');\nwindow.CEPA.finalText = window.CEPA.finalText || $('#final-text').html();\nwindow.CEPA.scrollToElement = function (element) {\n  var headerHeight = window.matchMedia('(min-width: 576px)').matches ? 62 : 40;\n  var backToVideoHeight = 46;\n  $([document.documentElement, document.body]).animate({\n    scrollTop: $(element).offset().top - headerHeight - backToVideoHeight\n  }, 500);\n};\n\nconst rootElement = document.getElementById('root');\nconst initialState = prepareInitialState(window.CEPA.initialState || dataFromHTML);\nconst store = configureStore(initialState);\n\nrootElement && ReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n$(function(jQuery){\n\n  const $thumbsSlider = $('.thumbs-slider');\n  $thumbsSlider.slick && $thumbsSlider.slick({\n    slidesToShow: 3,\n    slidesToScroll: 3,\n    infinite: false,\n    prevArrow: '<div class=\"slick-prev\">Previous</div>',\n    nextArrow: '<div class=\"slick-next\">Next</div>',\n    responsive: [\n      {\n        breakpoint: 768,\n        settings: {\n          slidesToShow: 2,\n          slidesToScroll: 2,\n          infinite: false,\n        }\n      },\n      {\n        breakpoint: 576,\n        settings: {\n          slidesToShow: 1,\n          slidesToScroll: 1,\n          infinite: false,\n        }\n      },\n    ],\n  });\n  const selectedCard = $('.cepa-card.selected')[0];\n  if (selectedCard) setTimeout(function(){\n    window.CEPA.scrollToElement(selectedCard);\n  });\n});\n"],"sourceRoot":""}